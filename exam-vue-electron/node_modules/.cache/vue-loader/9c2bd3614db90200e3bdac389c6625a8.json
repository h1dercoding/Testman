{"remainingRequest":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\src\\views\\examTools\\ToolConsult.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\src\\views\\examTools\\ToolConsult.vue","mtime":1649699772000},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683967470734},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1683967466085},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\babel-loader\\lib\\index.js","mtime":1683967472581},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683967470734},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\vue-loader\\lib\\index.js","mtime":1683967474246}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport dayjs from 'dayjs'\r\n\r\nexport default {\r\n  name: 'ToolConsult',\r\n  props: ['visible'],\r\n  data() {\r\n    return {\r\n      sendContent: '',\r\n      messages: [\r\n        {\r\n          type: 'send',\r\n          from: '我', // TODO: 改为准考证号\r\n          time: '2022-04-11 20:44:12',\r\n          content: '你好',\r\n        },\r\n        {\r\n          type: 'receive',\r\n          from: '监考老师',\r\n          time: '2022-04-11 20:46:16',\r\n          content: '好的',\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  watch: {\r\n    messages: {\r\n      handler() {\r\n        this.updateScroll()\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    closeTool() {\r\n      this.$emit('changeVisible', false)\r\n    },\r\n    updateScroll() {\r\n      const { chatBox } = this.$refs\r\n      // TODO: 滚动条有点小问题\r\n      chatBox.scrollTop = chatBox.scrollHeight - chatBox.style.height\r\n    },\r\n    sendMessage() {\r\n      if (this.sendContent.trim() === '') return\r\n\r\n      // TODO: ajax 请求\r\n\r\n      this.messages.push({\r\n        type: 'send',\r\n        from: '我',\r\n        time: dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n        content: this.sendContent,\r\n      })\r\n\r\n      this.sendContent = ''\r\n\r\n      setTimeout(() => {\r\n        this.messages.push({\r\n          type: 'receive',\r\n          from: '监考老师',\r\n          time: dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n          content: '好的',\r\n        })\r\n      }, 2000)\r\n    },\r\n  },\r\n}\r\n",null]}