{"remainingRequest":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\src\\views\\list\\ExamCardList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\src\\views\\list\\ExamCardList.vue","mtime":1649236970000},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683967470734},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\babel-loader\\lib\\index.js","mtime":1683967472581},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683967470734},{"path":"C:\\Users\\17982\\Desktop\\Testman\\exam-vue-electron\\node_modules\\vue-loader\\lib\\index.js","mtime":1683967474246}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getExamCardList, getExamRecordList } from '../../api/exam'\n\nexport default {\n  name: 'ExamCardList',\n  data () {\n    return {\n      description: '您可以随意点击下面的考试卡片开始一场属于您的考试',\n      extraImage: 'https://gw.alipayobjects.com/zos/rmsportal/RzwpdLnhmvDJToTdfDPe.png',\n      dataSource: [],\n      record: {}\n    }\n  },\n  methods: {\n    joinExam (id, date, elapse) {\n      const newDate = new Date()\n      if (Date.parse(date) < newDate && Date.parse(date) + elapse * 60 * 1000 > newDate) {\n        for (const ex in this.record) {\n          if (id === this.record[ex].examId) {\n            this.$notification.error({\n              message: '您已参加过本场考试！不可重复参加！'\n            })\n          } else {\n            const routeUrl = this.$router.resolve({\n              path: `/exam/${id}`\n            })\n            window.open(routeUrl.href, '_blank')\n          }\n        }\n      } else {\n        this.$notification.error({\n          message: '未在考试时间！进入考试失败！'\n        })\n      }\n    }\n  },\n  mounted () {\n    // 从后端数据获取考试列表，适配前端卡片\n    getExamCardList().then(res => {\n      console.log(res)\n      if (res.code === 0) {\n        this.dataSource = res.data\n      } else {\n        this.$notification.error({\n          message: '获取考试列表失败',\n          description: res.msg\n        })\n      }\n    }).catch(err => {\n      // 失败就弹出警告消息\n      this.$notification.error({\n        message: '获取考试列表失败',\n        description: err.message\n      })\n    })\n    getExamRecordList().then(res => {\n      console.log(res)\n      if (res.code === 0) {\n        this.record = res.data\n      } else {\n        this.$notification.error({\n          message: '获取考试记录失败',\n          description: res.msg\n        })\n      }\n    }).catch(err => {\n      // 失败就弹出警告消息\n      this.$notification.error({\n        message: '获取考试记录失败',\n        description: err.message\n      })\n    })\n  }\n}\n",{"version":3,"sources":["ExamCardList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExamCardList.vue","sourceRoot":"src/views/list","sourcesContent":["<template>\n  <div class=\"card-list\" ref=\"content\">\n    <a-list\n      :grid=\"{gutter: 24, lg: 3, md: 2, sm: 1, xs: 1}\"\n      :dataSource=\"dataSource\"\n    >\n      <a-list-item slot=\"renderItem\" slot-scope=\"item\">\n        <a-card :hoverable=\"true\" @click=\"joinExam(item.id, item.date, item.elapse)\">\n          <a-card-meta>\n            <div style=\"margin-bottom: 3px\" slot=\"title\">{{ item.title }}</div>\n            <div class=\"meta-content\" slot=\"description\">\n              <p>{{ item.content }}</p>\n              <p>开始时间：{{ item.date }}</p>\n            </div>\n          </a-card-meta>\n          <template class=\"ant-card-actions\" slot=\"actions\">\n            <a>满分：{{ item.score }}分</a>\n            <a>限时：{{ item.elapse }}分钟</a>\n          </template>\n        </a-card>\n      </a-list-item>\n    </a-list>\n  </div>\n</template>\n\n<script>\nimport { getExamCardList, getExamRecordList } from '../../api/exam'\n\nexport default {\n  name: 'ExamCardList',\n  data () {\n    return {\n      description: '您可以随意点击下面的考试卡片开始一场属于您的考试',\n      extraImage: 'https://gw.alipayobjects.com/zos/rmsportal/RzwpdLnhmvDJToTdfDPe.png',\n      dataSource: [],\n      record: {}\n    }\n  },\n  methods: {\n    joinExam (id, date, elapse) {\n      const newDate = new Date()\n      if (Date.parse(date) < newDate && Date.parse(date) + elapse * 60 * 1000 > newDate) {\n        for (const ex in this.record) {\n          if (id === this.record[ex].examId) {\n            this.$notification.error({\n              message: '您已参加过本场考试！不可重复参加！'\n            })\n          } else {\n            const routeUrl = this.$router.resolve({\n              path: `/exam/${id}`\n            })\n            window.open(routeUrl.href, '_blank')\n          }\n        }\n      } else {\n        this.$notification.error({\n          message: '未在考试时间！进入考试失败！'\n        })\n      }\n    }\n  },\n  mounted () {\n    // 从后端数据获取考试列表，适配前端卡片\n    getExamCardList().then(res => {\n      console.log(res)\n      if (res.code === 0) {\n        this.dataSource = res.data\n      } else {\n        this.$notification.error({\n          message: '获取考试列表失败',\n          description: res.msg\n        })\n      }\n    }).catch(err => {\n      // 失败就弹出警告消息\n      this.$notification.error({\n        message: '获取考试列表失败',\n        description: err.message\n      })\n    })\n    getExamRecordList().then(res => {\n      console.log(res)\n      if (res.code === 0) {\n        this.record = res.data\n      } else {\n        this.$notification.error({\n          message: '获取考试记录失败',\n          description: res.msg\n        })\n      }\n    }).catch(err => {\n      // 失败就弹出警告消息\n      this.$notification.error({\n        message: '获取考试记录失败',\n        description: err.message\n      })\n    })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .card-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 48px;\n  }\n\n  .ant-card-actions {\n    background: #f7f9fa;\n\n    li {\n      float: left;\n      text-align: center;\n      margin: 12px 0;\n      color: rgba(0, 0, 0, 0.45);\n      width: 50%;\n\n      &:not(:last-child) {\n        border-right: 1px solid #e8e8e8;\n      }\n\n      a {\n        color: rgba(0, 0, 0, .45);\n        line-height: 22px;\n        display: inline-block;\n        width: 100%;\n\n        &:hover {\n          color: #1890ff;\n        }\n      }\n    }\n  }\n\n  .new-btn {\n    background-color: #fff;\n    border-radius: 2px;\n    width: 100%;\n    height: 188px;\n  }\n\n  .meta-content {\n    position: relative;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    height: 64px;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n  }\n</style>\n"]}]}